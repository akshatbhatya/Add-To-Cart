let product = [{
    id: 1,
    name: 'Iphone',
    img: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR07q__hFBgxI-Jhe6FGLfX9bwUyAjhSpBQXBdwOK1bX5j8tkvr5o_-bhyU2Gix",
    desc: "",
    category: "Phone",
    price: 100
},
{
    id: 2,
    name: 'Galaxy',
    img: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcT8IF7SZHWkjELZruSGYX1w7y39anuUQ3KJ7cEnPkaSJvpQZd6JuAWa6LXtGShE",
    desc: "",
    category: "Phone",
    price: 100
}, {
    id: 3,
    name: 'Acer',
    img: "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQu2l9kmB5UVlxuddNWU2-XLArJQm33ojGnPAmZeqDDghlcuZ1m-_lQTHJ8rFZ0",
    desc: "",
    category: "Laptop",
    price: 100
},
{
    id: 4,
    name: 'Jbl',
    img: "https://images.unsplash.com/photo-1549638767-0ccf6cb1281b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8amJsJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60",
    desc: "",
    category: "Speaker",
    price: 100
},
{
    id: 5,
    name: 'Oneplus',
    img: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQXzCqbTiHdqMAPu6-F3OGuDFOBCclOx4pZY3bO4DCkLjPx94E6hpJ08XvLMCjJ",
    desc: "",
    category: "Phone",
    price: 100,
},
{
    id: 6,
    name: 'T-Shirt',
    img: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTwUGDm468dYrOyoVKaTg4bllAWqu_9Ttwi3idpVB3PDuQNsVKovB2tNraPQV1j",
    desc: "",
    category: "Cloth",
    price: 100,
},
{
    id: 7,
    name: 'Jean',
    img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQFoRW58Ezig1UdKpX-OR1QxM_esCWkp7wvcT0jrjgkk2-7X_kj1hVVtAX-1qt8",
    desc: "",
    category: "Cloth",
    price: 100,
},
{
    id: 8,
    name: 'Asus',
    img: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQZej7QOX65hEyajvaIWcZRwMHedtaQG5HbQGVr_hiPOztiPGtM3p8-A5T2ldy3",
    desc: "",
    category: "Laptop",
    price: 100,
},
{
    id: 9,
    name: 'Dell',
    img: "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRuy22gLgDK6ZVDen1UsDpCQwfGSMlPSfb1UEqCknSM8iFn0gJCwrXxnkvw8IQD",
    desc: "",
    category: "Laptop",
    price: 100,
},
{
    id: 10,
    name: 'Addidas',
    img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSuvaKhiDOSaVqu1ydqFZTQr_DS2JCCLjPE41hFrWhd04iyNOtKk-1CssIQB30U",
    desc: "",
    category: "Shoes",
    price: 100,
},
{
    id: 11,
    name: 'Asian',
    img: "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcShXPnWnSXZxRRrYBK0s0ZbGiNCTH1hOWRLUfCmR5-HOUxH96MvY7AJs3GUyNNd",
    desc: "",
    category: "Shoes",
    price: 100,
},
{
    id: 12,
    name: 'MacBook Pro 2023',
    img: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTPkxakLi2zVP5ti4CxHVzhvuR5YDuVddfcaMJKh3-MXPGi-FCZSQrueuhi6bq8",
    desc: "",
    category: "Laptop",
    price: 100,
},
{
    id: 13,
    name: 'LG Oled',
    img: "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSvLpDRYT8ML4-z_U6fH6FRJPsorew2BKNZUDrdlqqnottf40HTHcEq7xR5WjhF",
    desc: "",
    category: "Televisions",
    price: 100,
},
{
    id: 14,
    name: 'Samsung Qled',
    img: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcRyaMXTkBhbQTnSuNuXxsPjWYakGxMdm7oNwu7hFvFYzxGVpChU6svOKa4ZClot",
    desc: "",
    category: "Televisions",
    price: 100,
},
{
    id: 15,
    name: 'Sony Bravia',
    img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQu-YXRC6fXNeQixaP_rbR2fGLcQbxQ7iMtcbgSx-g6Y7bBFC-XwoSGNUooEu0z",
    desc: "",
    category: "Televisions",
    price: 100,
},
{
    id: 16,
    name: 'Sonos Arc',
    img: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR0jWXooRNyT2TU6zouqW6SQXKnt8Vtz8WjcEtXpbNET7Nf5VqUhNviHH3MJhRX",
    desc: "",
    category: "Speaker",
    price: 100,
},
{
    id: 17,
    name: 'Marshall Emberton II',
    img: "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTNnxysvkG5sls_h47Bq0eutOGDLCrwM-mAgD3sFZT8_T4eOBnnY3xlTn7bk4DK",
    desc: "",
    category: "Speaker",
    price: 100,
},
{
    id: 18,
    name: 'Apple Watch',
    img: "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQcifSZFvBCF6NtXULlM8fa7jgFAhZHf_CE1MlPDc04nZeZYUAeCxf9nRFIpwbo",
    desc: "",
    category: "Smartwatches",
    price: 100,
},
{
    id: 19,
    name: 'Galaxy Watch ',
    img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSj58N9B9fV1PSvXiDzo4bdC7kJMA7ByCF5CWM4FwD54P68jtmNyxBu1a1sezy8",
    desc: "",
    category: "Smartwatches",
    price: 100,
},
{
    id: 20,
    name: 'Canon Eos',
    img: "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRDWxrOePhfX-9cLgYU_4_OB57hTAyueEElH35tTyvhyGdngT3nArGQg61DSKP5",
    desc: "",
    category: "Cameras",
    price: 100,
},
{
    id: 21,
    name: 'Sony Alpha 1',
    img: "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTskLssQNjwGUwS2FPA5QJN7Ij40l-3hsdmT5maeeTLwTgKA2QD8jF6mTVQ9TOy",
    desc: "",
    category: "Cameras",
    price: 100,
},]
//  store variables
let sliderimg = document.querySelectorAll('.sliderimg');

let sectionofcard = document.querySelector('.sectionofcard');

let basket = JSON.parse(localStorage.getItem("data")) || [];


let counter = 0;

sliderimg.forEach((slide, index) => {
    slide.style.left = `${index * 100}%`

})

// to transform image 
function slidenow() {
    sliderimg.forEach((slide) => {
        slide.style.transform = `translateX(-${counter * 100}%)`;
    })
}

//  to start slider
function startslide() {
    counter++;
    if (counter == sliderimg.length) {
        counter = 0;
    }
    slidenow()

}

//  Used for Slide Images as a set time
setInterval(() => {
    startslide();
}, 3000);

//  to load content when dom is loaded

window.addEventListener("DOMContentLoaded", (e) => {
    e.preventDefault();
    ourproducts(product);
    buttons();
    calclation();
})

// using map to add all product data to web

function ourproducts(items) {
    let ourdata = items.map(x => {
        let { id, desc, name, price,img } = x
        let search = basket.find((x) => x.id == id)
        return `<div class="card" id=product-id-${id}>
        <div class="img">
            <img src="${img}" alt="" class="productimg">
        </div>
        
        <h2 style="text-align: center;color:white">${name}</h2>
        <h3>${desc}</h3>
        <div class="cardspecs">
        <h5 style="font-weight:500;font-size:16px">&#8377 ${price}</h5>
        <div class="productselectionbtn" style="display:flex;gap:8px">
          <span onclick="incriment(${id})"><i class="bi bi-patch-plus icon"></i></span>
          <span id=${id}>${search == undefined ? 0 : search.item}</span>
          <span onclick="decrement(${id})" ><i class="bi bi-patch-minus icon" class="icon"></i></span>
        </div>
        </div>
    </div>`
    }).join(' ')
    sectionofcard.innerHTML = ourdata;

}

// to remove duplicate category name using reduce and create a button and apply filter method to  show data by button name
function buttons() {
    let btns = product.reduce((values, items) => {
        if (!values.includes(items.category)) {
            values.push(items.category)

        }
        return values
    }, ['All'])

    let categorybtn = document.querySelector('.categorybtn');
    const buttons = btns.map(x => {
        return `<button data-name="${x}" class="btn">${x}</button>`
    }).join(' ')
    categorybtn.innerHTML = buttons;


    let buttonsname = document.querySelectorAll('.btn');
    buttonsname.forEach(btn => {
        btn.addEventListener('click', () => {

            let buttondata = btn.dataset.name;
            if (buttondata == "All") {
                ourproducts(product)
            }
            else {
                let toseechoise = product.filter(x => (x.category === buttondata))
                ourproducts(toseechoise);
            }

        })
    }


    )
}



function incriment(id) {
    let search = basket.find(x => x.id === id)
    if (search == undefined) {
        basket.push({
            id: id,
            item: 1
        })
    }
    else {
        search.item += 1;
    }
    localStorage.setItem("data", JSON.stringify(basket));
    update(id)
}


function decrement(id) {
    let search = basket.find(x => x.id === id)
    if (search == undefined) return
    else {
        if (search.item === 0) return
        search.item -= 1;
    }
    update(id)
    basket = basket.filter((x) => x.item !== 0);
    localStorage.setItem("data", JSON.stringify(basket));
    calclation();
}


function update(id) {
    let search = basket.find(x => x.id === id);
    let data = search.item;

    let innerdata = document.getElementById(id);

    innerdata.innerHTML = data;
    calclation();
}

let productcalc = document.querySelector('#totalproduct');


function calclation() {
    let coterofitems = document.querySelector('#innercount')
    coterofitems.innerHTML = basket.map(x => x.item).reduce((x, y) => x + y, 0);

}
